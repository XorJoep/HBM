# BENCHMARK SCRIPTS
BM_SCRIPT_FOLDER_LOCAL = ./$(BM_SCRIPT_FOLDER)

BENCHMARK_SCRIPT_LOCAL = $(BM_SCRIPT_FOLDER_LOCAL)/$(BENCHMARK_SCRIPT)
PYTHON_PARSE_SCRIPT_LOCAL = $(BM_SCRIPT_FOLDER_LOCAL)/$(PYTHON_PARSE_SCRIPT)
PYTHON_PLOT_SCRIPT_LOCAL = $(BM_SCRIPT_FOLDER_LOCAL)/$(PYTHON_PLOT_SCRIPT)
PYTHON_MULTIPLOT_SCRIPT_LOCAL = $(BM_SCRIPT_FOLDER_LOCAL)/$(PYTHON_MULTIPLOT_SCRIPT)

# RESULTS FOLDER CONFIG
RESULTS_FOLDER_LOCAL = ./$(RESULTS_FOLDER)

# GENERATED DATA FOLDER
GEN_DATA_FOLDER_LOCAL = ./$(GENERATED_DATA_FOLDER)

RESULT_FILE = ./$(RESULT_FILE_NAME)

#################################

all: benchmark plot

benchmark: $(RESULT_FILE) parse
$(RESULT_FILE): $(HOST_OUT) $(PYTHON_PARSE_SCRIPT_LOCAL) $(BENCHMARK_SCRIPT_LOCAL) clean
	$(BENCHMARK_SCRIPT_LOCAL) $(HOST_OUT) $(XCLBIN_OUT) $(KERNEL_NAME) $(RESULTS_FOLDER_LOCAL) $(SNAPPY_SCRIPT) $(GEN_DATA_FOLDER_LOCAL) $(SILESIA_FILES)

parse:
	python3 $(PYTHON_PARSE_SCRIPT_LOCAL) $(RESULTS_FOLDER_LOCAL) $(RESULT_FILE)

plot: parse
	python3 $(PYTHON_PLOT_SCRIPT_LOCAL) $(RESULT_FILE)

multiplot:
	python3 $(PYTHON_MULTIPLOT_SCRIPT_LOCAL) ./results_c16.csv ./results_c20.csv

# Cleaning stuff
clean:
	rm -rf $(RESULTS_FOLDER_LOCAL)
	rm -rf $(GEN_DATA_FOLDER_LOCAL)
	mkdir -p $(RESULTS_FOLDER_LOCAL)
	mkdir -p $(GEN_DATA_FOLDER_LOCAL)